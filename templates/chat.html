{% extends 'layout.html' %}
{% block content %}
<div class="ui stackable grid container" style="padding-top: 10em;">
	{{ session }}
	<div class="four wide column" style="border: 4px solid black; min-height: 400px; text-align: center;">
		<h1>Users</h1>
		<ul id="usersList">
			
		</ul>
	</div>
	<div class="twelve wide column"  style="min-height: 400px; border: 4px solid black; text-align: center;">
		<h1>Chats</h1>
		<div id="chats">
			
		</div>
	</div>
</div>
{% endblock content %}
{% block script %}
<script type="text/javascript">
	let socket = io.connect('http://' + document.domain + ':' + location.port);
	let user_list = $('ul#usersList');
	socket.on('connect', function(){
		console.log("Connected")
		socket.emit('request_users');
	})
	socket.on('list_users', function(message){
		console.dir(message);
		let users = message;
		user_list.empty();
		for(user of users){
			user_list.append('<li>' + user.username + '</li>');
		}
	})
</script>
{% endblock script %}